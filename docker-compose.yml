version: '3'

services:
  api:
    container_name: horizon_api
    build:
      context: ./horizon-api
      dockerfile: Dockerfile
    ports:
      - '3000:8080'
    command: go run main.go
    tty: true
    volumes:
      - ./horizon-api:/go/src/horizon-api

  mysql:
    image: mysql
    container_name: horizon_mysql
    env_file: ./mysql/mysql.env
    environment:
      - TZ=Asia/Tokyo
    ports:
      - 3306:3306
    restart: always
    volumes: 
      - datastore:/var/lib/mysql
      - ./mysql/database:/docker-entrypoint-initdb.d

  phpmyadmin:
    image: phpmyadmin/phpmyadmin
    environment:
      - PMA_ARBITRARY=1
      - PMA_HOST=MySQL
      - PMA_USER=root
      - PMA_PASSWORD=root
    ports:
       - 8090:80
  
  neo4j:
    image: neo4j
    container_name: horizon_neo4j
    ports:
    - 7474:7474
    - 7687:7687
    volumes:
    - ./ff/volumes/neo4j/data:/data

volumes:
  datastore:
    driver: local